(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{637:function(e,t,a){"use strict";var r=a(0),n=(a(7),a(22),a(15),a(51));t.a={inject:["clearBodyAd"],provide:function(){return{waitLoadAds:this.waitLoadAds}},data:function(){return{appendedTags:null}},watch:{isLoadComplete:function(e){this.isShowLoading&&!e?this.$el.style.visibility="hidden":this.$el.style.visibility="visible"}},beforeMount:function(){this.clearBodyAd()},destroyed:function(){this.removeAppendedTags()},methods:{loadAds:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,t.$store.dispatch("ad/load",{page:e});case 4:return t.removeAppendedTags(),a.next=7,n.a.appendToHead(t.$store.getters["ad/headerAds"],e);case 7:t.appendedTags=a.sent,a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),t.$errorHandler(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))()},waitLoadAds:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("ad/waitLoad");case 2:case"end":return t.stop()}}),t)})))()},removeAppendedTags:function(){this.appendedTags&&this.appendedTags.forEach((function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}))}}}},655:function(e,t,a){(function(a){var r,n,o;n=[],r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,a){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){c(r.response,t,a)},r.onerror=function(){},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,a){var s=i.URL||i.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?o(c):n(c.href)?r(e,t,a):o(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,i){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),a);else if(n(e))r(e,a,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,a,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,a);var o="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&c||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,m=d.createObjectURL(e);n?n.location=m:location.href=m,n=null,setTimeout((function(){d.revokeObjectURL(m)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c},void 0===(o="function"==typeof r?r.apply(t,n):r)||(e.exports=o)}).call(this,a(65))},660:function(e,t,a){"use strict";a(120);var r=a(28),n=a(29),o=a(2),i=a(655),s=a.n(i),c=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"imageToBlob",value:function(e){var t=document.createElement("canvas");return t.width=e.naturalWidth,t.height=e.naturalHeight,t.getContext("2d").drawImage(e,0,0),o.a.dataURLtoBlob(t.toDataURL())}},{key:"executeDownload",value:function(t,a,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"downlaod";if(t&&t.getContext){(o<=0||i<=0)&&(o=a.naturalWidth,i=a.naturalHeight),t.width=o,t.height=i;var c=t.getContext("2d"),l=new Image;l.crossOrigin="anonymous",l.src=a.src,l.onload=function(){c.drawImage(l,r,n,o,i,0,0,o,i);var a=t.toDataURL();e._doDownLoad(a,s)}}}},{key:"executeDownloadFromCanvas",value:function(t,a,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"downlaod";if(t&&t.getContext){(o<=0||i<=0)&&(o=a.width,i=a.height),t.width=o,t.height=i;var c=t.getContext("2d");c.drawImage(a,r,n,o,i,0,0,o,i);var l=t.toDataURL();e._doDownLoad(l,s)}}},{key:"_getFilename",value:function(e){var t=new Date,a=function(e){return(e<10?"0":"")+e};return e+t.getFullYear()+a(t.getMonth()+1)+a(t.getDay())+a(t.getHours())+a(t.getMinutes())+a(t.getSeconds())+".png"}},{key:"_doDownLoad",value:function(t,a){e._download(t,a)}},{key:"_download",value:function(t,a){s.a.saveAs(o.a.dataURLtoBlob(t),e._getFilename(a))}}]),e}(),l={props:{nameBase:{type:String,default:"download"},image:null,x:{type:Number,default:0},y:{type:Number,default:0},w:{type:Number,default:0},h:{type:Number,default:0},className:{type:String,default:""},buttonName:{type:String,default:"Download"}},data:function(){return{id:"dl-canvas"}},mounted:function(){var e=this;this.$nextTick((function(){e.id="dl-canvas-"+Math.floor(1e4*Math.random())}))},methods:{onDownload:function(){c.executeDownload(document.getElementById(this.id),this.image,this.x,this.y,this.w,this.h,this.nameBase)}}},u=a(16),d=Object(u.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("a",{class:e.className,on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onDownload.apply(null,arguments)}}},[e._t("default",(function(){return[e._v("\n      "+e._s(e.buttonName)+"\n    ")]}))],2),e._v(" "),t("div",{staticStyle:{height:"0",overflow:"hidden",width:"0"}},[t("canvas",{attrs:{id:e.id}})])])}),[],!1,null,null,null);t.a=d.exports},795:function(e,t,a){"use strict";a.r(t);a(33),a(30),a(42),a(7),a(57),a(22),a(58);var r=a(0),n=a(3),o=(a(15),a(38)),i=a(637),s=(a(25),a(98),a(660)),c=a(300),l=a(296),u=a(11);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"SecretImageMakerCompleteComponent",inject:["showUseBookmarkDialog"],components:{ImageDownloadComponent:s.a,ImageMakerListComponent:c.a,Ad:l.a},data:function(){return{shareUrl:"",completeImage:null,shareMessage:null,showBookmark:!1}},computed:m(m(m({},Object(o.d)(["imageMakerId","shareCd","imageMakerInfo","shareImageUrl"])),Object(o.c)("bookmark",["isBookmarked"])),{},{premiumService:function(){var e=this.imageMakerInfo&&this.imageMakerInfo.premium_service;if(e){var t=Date.now(),a=this.parseDate(e.publish_date),r=this.parseDate(e.close_date);if(a<=t&&!(r<t))return e}return null},canSaveOverwrite:function(){return this.saveId>0},isSaveComplete:function(){return this.isSaved},premiumServiceImageUrl:function(){return Object(u.e)(this.premiumService.complete_banner_image_url)}}),created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$localData.isInit();case 2:if(t.sent){t.next=5;break}return t.next=5,e.$localData.init(e.imageMakerId,!1);case 5:case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showBookmark=e.$user.isBookmarkEnabled("secret_complete")&&0==(e.$user.isLogin&&e.isBookmarked(e.imageMakerId)),t.next=4,e.$nextTick();case 4:e.completeImage=e.$refs.completeImage;case 5:case"end":return t.stop()}}),t)})))()},methods:m(m({},Object(o.b)("bookmark",["addBookmark","removeBookmark"])),{},{parseDate:function(e){return e&&Date.parse(e.replace(/-/g,"/"))||null},onClickBookmark:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$user.isLogin){t.next=18;break}if(!e.isBookmarked(e.imageMakerId)){t.next=7;break}return t.next=5,e.removeBookmark(e.imageMakerId);case 5:t.next=16;break;case 7:return t.prev=7,t.next=10,e.addBookmark(e.imageMakerId);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(7),t.next=16,e.showLimitError();case 16:t.next=19;break;case 18:e.showUseBookmarkDialog();case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(0),e.$errorHandler(t.t1);case 24:case"end":return t.stop()}}),t,null,[[0,21],[7,12]])})))()},showLimitError:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$swal({icon:"warning",title:e.$i18n.t("bookmark.bookmarkMaxover"),text:e.$i18n.t("bookmark.bookmarkMaxoverDelete"),showCancelButton:!0,confirmButtonText:e.$i18n.t("bookMarkretune"),cancelButtonText:e.$i18n.t("info.popupClose")});case 2:t.sent.isConfirmed&&(location.href=e.localePath({name:"mypage-bookmark"}));case 4:case"end":return t.stop()}}),t)})))()}})},f=a(16),g=Object(f.a)(p,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"image-maker-complete-template"}},[t("ad",{attrs:{cd:"secret_complete_overlay_pc"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_overlay_sp"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_interstitial_pc"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_interstitial_sp"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_interstitial_bb_pc"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_interstitial_bb_sp"}}),e._v(" "),t("div",{staticClass:"complete-Container"},[t("ad",{attrs:{cd:"secret_complete_header_bottom_pc"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_header_bottom_sp"}}),e._v(" "),t("div",{staticClass:"complete-Main"},[t("div",[t("p",{staticClass:"complete-Message"},[e._v(e._s(e.isSaveComplete?e.$t("imageMaker.saved"):e.$t("imageMaker.completed")))])]),e._v(" "),e.premiumService?t("div",{staticClass:"complete-Premium_Banner"},[t("a",{attrs:{href:e.premiumService.complete_banner_url,target:"_blank",id:"premium-complete-link"}},[t("img",{staticClass:"lazyload",attrs:{"data-src":e.premiumServiceImageUrl}})])]):e._e(),e._v(" "),t("div",{staticClass:"complete-Main_Img"},[t("img",{ref:"completeImage",staticClass:"lazyload",attrs:{"data-src":e.shareImageUrl,alt:e.$t("imageAlt.completed"),crossorigin:"anonymous"}})]),e._v(" "),"Safari"==e.$ua.browser()||e.$ua.isFromSmartphone()||e.$ua.isFromTablet()?t("p",{staticClass:"complete-Download_Longtap"},[e._v("\n        "+e._s(e.$t("imageMaker.rightClickDownload"))+"\n        "),t("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}})]):t("image-download-component",{attrs:{image:e.completeImage,"button-name":e.$t("imageMaker.downloadImage"),"class-name":"complete-Download_Btn"}})],1),e._v(" "),t("ad",{attrs:{cd:"secret_complete_image_bottom_pc"}}),e._v(" "),t("ad",{attrs:{cd:"secret_complete_image_bottom_sp"}}),e._v(" "),e.showBookmark?t("div",{staticClass:"recommend-bookmark"},[e.isBookmarked(e.imageMakerId)?t("span",[e._v(e._s(e.$t("complete.Bookmarkcomp")))]):[t("span",[e._v(e._s(e.$t("complete.BookmarkAddtitlePlay")))]),e._v(" "),t("button",{staticClass:"c_btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onClickBookmark.apply(null,arguments)}}},[e._v(e._s(e.$t("complete.BookmarkUse")))])]],2):e._e(),e._v(" "),t("div",{staticClass:"complete-Share_Wrapper"},[t("div",{staticClass:"complete-Share_Secret"},[e._v("\n        "+e._s(e.$t("imageMaker.completeShareSecret"))+"\n      ")]),e._v(" "),t("ul",{staticClass:"complete-Some_Btns"},[t("li",[t("picrew-link",{staticClass:"complete-Btn_Back",attrs:{to:e.localePath({name:"secret_image_maker-key",params:{key:e.$route.params.key}})}},[e._v(e._s(e.$t("imageMaker.makeAgain")))])],1)])]),e._v(" "),t("div",{staticClass:"st-Related_Wrapper"},[t("section",{staticClass:"st-Related_Section"},[t("h2",{staticClass:"st-Related_Title"},[t("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("searchByTagName"))+"\n        ")]),e._v(" "),t("div",{staticClass:"st-Related_Body"},[t("div",{staticClass:"st-Related_Tags"},[e.imageMakerInfo.tags&&e.imageMakerInfo.tags.length>0?e._l(e.imageMakerInfo.tags,(function(a,r){return t("span",{key:r,staticClass:"st-Related_Tag"},[a&&a.tag_name?t("picrew-link",{attrs:{to:e.localePath(e.$store.getters.getSearchUrl(a.tag_name,2))}},[e._v(e._s(a.tag_name))]):e._e()],1)})):t("span",[e._v(e._s(e.$t("searchTagNotSpecified")))])],2)])]),e._v(" "),t("section",{staticClass:"st-Related_Section"},[t("h2",{staticClass:"st-Related_Title"},[t("i",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("imageMaker.randomPickup"))+"\n        ")]),e._v(" "),t("div",{staticClass:"st-Related_Body"},[t("image-maker-list-component",{attrs:{count:4,"page-name":"random_list"}})],1)])])],1)],1)}),[],!1,null,null,null),v=g.exports;function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={name:"SecretImageMakerComplete",mixins:[i.a],inject:["addBodyAd","loadStart","loadComplete","stopCompleteAnimation"],components:{ImageMakerCompleteComponent:v},computed:k(k(k({},Object(o.d)(["imageMakerId","shareCd","imageMakerInfo"])),Object(o.c)(["isMyShareData"])),{},{shareUrl:function(){return this.$store.getters.getShareUrl(this.shareCd)}}),head:function(){return this.$generateMetaInfo({page:"complete",ogp:!0,secret:!0})},fetch:function(e){var t=e.store,a=e.params,r=e.redirect,n=e.localePath;null==t.state.currentSaveImage&&r(n({name:"secret_image_maker-key",params:a}))},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadAds("secret_complete");case 2:return t.next=6,e.$localData.isInit();case 6:if(t.sent){t.next=9;break}return t.next=9,e.$localData.init(e.imageMakerId,!1);case 9:e.$store.dispatch("showHeader"),e.$store.dispatch("showFooter");case 11:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,e.waitLoadAds();case 3:e.loadComplete(),e.stopCompleteAnimation(null,new Date,500);case 5:case"end":return t.stop()}}),t)})))()}},b=Object(f.a)(_,(function(){var e=this._self._c;return e("div",{attrs:{id:"image-maker-complete"}},[e("client-only",[e("image-maker-complete-component",{attrs:{share:!1}})],1)],1)}),[],!1,null,null,null);t.default=b.exports}}]);