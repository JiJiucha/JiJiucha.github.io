(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{650:function(e,t,n){"use strict";n(33),n(30),n(42),n(7),n(57),n(22),n(58);var r=n(0),a=n(3),i=(n(15),n(38));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={Name:"PasswordConfirmDialog",components:{ValidationInput:n(639).a},props:{showHeader:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!1}},data:function(){return{form:{password:null},errorMessage:null,loading:!1}},computed:{canSubmit:function(){var e;return(null===(e=this.form.password)||void 0===e?void 0:e.length)>0}},beforeDestroy:function(){this.form.password=null},methods:o(o({},Object(i.b)("account",["confirmPassword"])),{},{onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.canSubmit){t.next=16;break}return t.prev=2,e.loading=!0,t.next=6,e.$ladda.wrap(e.$refs.submitButton,Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.confirmPassword(e.form.password);case 2:case"end":return t.stop()}}),t)}))));case 6:e.$emit("close","OK"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),422==t.t0.statusCode?e.errorMessage=t.t0.message:e.$errorHandler(t.t0);case 12:return t.prev=12,e.loading=!1,e.form.password=null,t.finish(12);case 16:return e.$nextTick((function(){var t;return null===(t=e.$refs.inputPassword)||void 0===t?void 0:t.focus()})),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[2,9,12,16]])})))()},onClickCancel:function(){this.form.password=null,this.$emit("close","Cancel")}})},u=n(16),l=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"password-confirm-dialog"},[t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit.apply(null,arguments)}}},[t("fieldset",{attrs:{disabled:e.loading}},[e.showHeader?t("header",[t("h1",[e._v("確認")])]):e._e(),e._v(" "),t("main",[t("p",[e._v(e._s(e.$t("passwordConfirm")))]),e._v(" "),t("validation-input",{ref:"inputPassword",attrs:{type:"password",name:"password","input-type":"password","hide-status":!0,"check-api":!1,disabled:e.loading},on:{"valid-value":function(t){return e.form.password=t}}}),e._v(" "),t("p",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))])],1),e._v(" "),t("footer",[e.cancelable?e._e():t("button",{staticClass:"c_btn",attrs:{type:"button"},on:{click:e.onClickCancel}},[e._v(e._s(e.$t("cancelButtonText")))]),e._v(" "),t("button",{ref:"submitButton",staticClass:"c_btn",attrs:{type:"submit",disabled:!e.canSubmit,"data-style":"zoom-out"}},[e._v(e._s(e.$t("confirmButtonText")))])])])])])}),[],!1,null,null,null);t.a=l.exports},662:function(e,t,n){"use strict";n(33),n(30),n(42),n(7),n(57),n(22),n(58);var r=n(0),a=n(3),i=(n(15),n(38)),s=n(639),o=n(664),c=n(641),u=n(650);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"EmailRegister",mixins:[c.a],inject:["setContentFocus"],components:{ValidationInput:s.a,ActivatePanel:o.a,PasswordConfirmDialog:u.a},props:{isSignup:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1}},data:function(){return{activating:!1,form:{email:null,password:null},errors:{},loading:!1,isConfirmed:null}},computed:p(p({},Object(i.c)("account",["sendMailRemainTime"])),{},{canRegist:function(){var e,t,n=(null===(e=this.form.email)||void 0===e?void 0:e.length)>0,r=!this.isSignup&&!this.isNew||(null===(t=this.form.password)||void 0===t?void 0:t.length)>0;return n&&r}}),fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.isSignup||0!=e.isNew){t.next=13;break}return t.prev=1,t.next=4,e.isPasswordConfirmed();case 4:e.isConfirmed=t.sent,e.$nextTick((function(){return e.setContentFocus()})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.$errorHandler(t.t0);case 11:t.next=14;break;case 13:e.isConfirmed=!0;case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},methods:p(p({},Object(i.b)("account",["signupEmail","sendSignupActivateMail","registerEmail","sendMpaActivateMail","updateEmail","isPasswordConfirmed"])),{},{onConfirmClosed:function(e){var t=this;"OK"==e&&(this.isConfirmed=!0,this.$nextTick((function(){return t.setContentFocus()})))},onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$ladda.wrap(e.$refs.submitButton,Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,t.prev=1,!e.isSignup){t.next=7;break}return t.next=5,e.sendSignupActivateMail(e.form.email);case 5:t.next=9;break;case 7:return t.next=9,e.sendMpaActivateMail(e.form.email);case 9:e.activating=!0,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),204==t.t0.statusCode?location.href=e.localePath({name:"mypage"}):422==t.t0.statusCode?e.errors=t.t0.errors:e.$errorHandler(t.t0);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))));case 2:case"end":return t.stop()}}),t)})))()},onCheckActivationCode:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isSignup){n.next=15;break}return n.prev=1,n.next=4,t.signupEmail({email:t.form.email,password:t.form.password,activation_key:e});case 4:n.next=13;break;case 6:if(n.prev=6,n.t0=n.catch(1),204!=n.t0.statusCode){n.next=12;break}location.href=t.localePath({name:"mypage"}),n.next=13;break;case 12:throw n.t0;case 13:case 18:n.next=22;break;case 15:if(!t.isNew){n.next=20;break}return n.next=18,t.registerEmail({email:t.form.email,password:t.form.password,activation_key:e});case 20:return n.next=22,t.updateEmail({email:t.form.email,activation_key:e});case 22:case"end":return n.stop()}}),n,null,[[1,6]])})))()},onResend:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSignup){t.next=15;break}return t.prev=1,t.next=4,e.sendSignupActivateMail(e.form.email);case 4:t.next=13;break;case 6:if(t.prev=6,t.t0=t.catch(1),204!=t.t0.statusCode){t.next=12;break}location.href=e.localePath({name:"mypage"}),t.next=13;break;case 12:throw t.t0;case 13:t.next=23;break;case 15:return t.prev=15,t.next=18,e.sendMpaActivateMail(e.form.email);case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(15),e.$errorHandler(t.t1);case 23:case"end":return t.stop()}}),t,null,[[1,6],[15,20]])})))()},onCompleted:function(){this.$emit("regist"),this.resetForm()},onCancel:function(){var e=this;this.activating=!1,this.resetForm(),this.$nextTick((function(){return e.setContentFocus()}))},resetForm:function(){this.form.email=null,this.form.password=null}})},f=n(16),m=Object(f.a)(d,(function(){var e=this,t=e._self._c;return t("div",[null===e.isConfirmed?t("div",{staticClass:"PWloading"},[e._m(0)]):e.isConfirmed?!1===e.activating?t("div",[t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit.apply(null,arguments)}}},[t("fieldset",{attrs:{disabled:e.loading}},[t("label",[t("div",[e._v("\n            "+e._s(e.isSignup||e.isNew?"":e.$t("profile.EmailChangetextafter"))+" "+e._s(e.$t("signup.memberEntryEmail"))+"\n            "),t("validation-input",{attrs:{type:"email",name:"email","input-type":"email","input-mode":"email","redirect-by204":e.isSignup,state:e.errorState("email")},on:{"valid-value":function(t){return e.form.email=t}}})],1)])]),e._v(" "),e.isSignup||e.isNew?t("fieldset",{attrs:{disabled:e.loading}},[t("label",[t("div",{staticClass:"pwBox"},[e._v("\n            "+e._s(e.$t("signup.memberEntryPass"))+"\n            "),t("validation-input",{attrs:{type:"password",name:"password","redirect-by204":e.isSignup,state:e.errorState("password")},on:{"valid-value":function(t){return e.form.password=t}}})],1)])]):e._e(),e._v(" "),e.isSignup||e.isNew?t("fieldset",[t("p",{staticClass:"note",domProps:{innerHTML:e._s(e.$t("signup.termsConditionsLinksEntry"))}})]):e._e(),e._v(" "),t("fieldset",[t("p",{staticClass:"note"},[e._v(e._s(e.$t("signup.EntryBtnText")))]),e._v(" "),e.isSignup||e.isNew?e._e():t("div",{staticClass:"innertext"},[t("p",{domProps:{innerHTML:e._s(e.$t("profile.EmailAdressUpdateText"))}})]),e._v(" "),t("button",{ref:"submitButton",staticClass:"ladda-button c_btn",attrs:{type:"submit","data-style":"zoom-out",disabled:!e.canRegist||e.sendMailRemainTime>0}},[t("span",{staticClass:"ladda-label"},[e._v("\n            "+e._s(e.$t("signup.buttonTextRegister"))+"\n            "),e.sendMailRemainTime>0?t("span",[e._v("("+e._s(e.sendMailRemainTime)+"s)")]):e._e()])]),e._v(" "),e.isSignup?t("picrew-link",{staticClass:"c_btn return",attrs:{to:e.localePath({name:"auth-signup"}),"data-style":"zoom-out"}},[e._v(e._s(e.$t("goBack")))]):e._e()],1)])]):t("activate-panel",{attrs:{email:e.form.email,"on-check":e.onCheckActivationCode,"on-resend":e.onResend,"on-completed":e.onCompleted,"on-cancel":e.onCancel}}):t("div",[t("password-confirm-dialog",{attrs:{"show-header":!1,cancelable:!0},on:{close:e.onConfirmClosed}})],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"PWloading-item"},[e("i",{staticClass:"fa fa-spinner fa-pulse fa-3x fa-fw"})])}],!1,null,null,null);t.a=m.exports},803:function(e,t,n){"use strict";n.r(t);n(87),n(109),n(7),n(39),n(20);var r=n(662),a=["input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)","button:not(:disabled)","object:not(:disabled)",'a[href]:not([href=""])','[tabindex]:not([tabindex=""])'].join(","),i={name:"AccountRegisterEmail",authenticatedArea:null,inject:["loadComplete","setPageTitle"],components:{EmailRegister:r.a},provide:function(){return{setContentFocus:this.setContentFocus}},fetch:function(e){var t=e.redirect,n=e.localePath;e.$user.isLogin&&t(n({name:"auth-signup"}))},created:function(){},mounted:function(){this.setPageTitle('<i class="fa-solid fa-user"></i> '+this.$i18n.t("loginPage.signUp")),this.loadComplete()},methods:{onRegist:function(){location.href=this.localePath({name:"auth-signup"})},setContentFocus:function(){var e=this;this.$nextTick((function(){var t=e.$el.querySelectorAll(a);if(t.length>0){var n=Array.from(t).find((function(e){var t=getComputedStyle(e),n=t.display,r=t.visibility,a=t.opacity;return"none"!=n&&"hidden"!=r&&parseInt(a||0)>0}));null==n||n.focus()}}))}}},s=n(16),o=Object(s.a)(i,(function(){var e=this._self._c;return e("div",{staticClass:"register-container"},[e("email-register",{attrs:{"is-signup":!0},on:{regist:this.onRegist}})],1)}),[],!1,null,null,null);t.default=o.exports}}]);